# AnimationClipToVrmaSample

A sample Unity project that converts Humanoid AnimationClips into VRM Animation (.vrma) files.

> This conversion embeds the model's skeleton information into the `.vrma` file. If you plan to redistribute `.vrma` files, please read the **Notice about VRMA file redistribution** section below.

---

## Installation

### 1. Clone the sample project

Clone this repository and open it directly in Unity.

### 2. Integrate into an existing project

1. Install [UniVRM 0.115.0](https://github.com/vrm-c/UniVRM/releases/tag/v0.115.0) in your project.
2. Add the following to your `Packages/manifest.json` to reference this exporter package:

   ```json
   "com.baxter.animation-clip-to-vrma": "https://github.com/malaybaku/AnimationClipToVrmaSample.git?path=/Assets/AnimationClipToVrma/Package#x.x.x"
   ```
3. Or import the provided `.unitypackage` from the UniVRM release page.

---

## Usage

### Requirements

* A **Humanoid**-rigged `AnimationClip` (either standalone or embedded in an FBX).
* (For Method 2) A Humanoid avatar prefab for previewing and exporting.

> Although tested with VRM avatars, this should work with any Humanoid rig.

### Method 1: Right‑click Conversion

1. In the Project window, right-click any `AnimationClip` asset.
2. Choose **Assets > VRM > Convert to VRM Animation**.
3. Save the generated `.vrma` file using the default VRoid sample skeleton.

Use this quick method if the sample skeleton works for you.

### Method 2: VRM Animation Exporter Window

1. In the Unity menu, go to **VRM1/VRM Animation Exporter**.
2. In the **VRM Animation Exporter** window:

   * **Avatar**: Assign a T‑pose prefab with a Humanoid `Animator`.
   * **Animation**: Assign the `AnimationClip` to convert.
3. Click **Export** to generate a `.vrma` file.

This method lets you use your own avatar’s skeleton as the reference for conversion.

### Method 3: Batch Animations Exporter

1. In the Unity menu, go to **VRM1/Batch Animations Exporter**.
2. In the **Batch VRM Animation Exporter** window:

   * **Avatar**: Assign a T‑pose prefab with a Humanoid `Animator`.
   * **Input Clips Folder**: Select the root folder that contains the AnimationClips you want to batch convert.
   * **Output VRMA Folder**: Select the root folder where the generated `.vrma` files will be saved.
3. Click **Export All to VRMA** to process every clip in the input folder and output corresponding `.vrma` files in the output folder.

---

## Verifying VRM Animation

You can preview `.vrma` files in web tools like VRoid Hub’s Studio or directly in Unity:

1. Import a VRM avatar and this sample’s UniVRM package (v0.115.0) into your project.
2. Open the scene `VRM10_Samples/SimpleVrma/SimpleVrma`.
3. Play the scene and drag your `.vrma` file onto the sample avatar.
4. Uncheck **BoxMan** to hide the fallback skeleton mesh.

---

## Notice about VRMA file redistribution

The `.vrma` file embeds the Humanoid bone skeleton used during conversion. When redistributing `.vrma` files:

* Ensure the avatar model you used is allowed for redistribution and does not require attribution.
* Keep a record of which avatar was used to generate each `.vrma` file.

> This notice is specific to `.vrma` redistribution and does not override this repository’s license.

---

## License

* **Avatar models** in `Assets/Model_VRoidSampleA` follow the VRM model’s license:

  * Source: [AvatarSample\_A](https://hub.vroid.com/characters/2843975675147313744/models/5644550979324015604)
* **Scripts** in `Assets/AnimationClipToVrma/Scripts/Editor/AssetCommands` contain hard‑coded skeleton data derived from the above model. Using these directly must comply with that model’s license.
* **All other files** are licensed under this repository’s [LICENSE](LICENSE).

---

## For Developers: Updating the Reference Skeleton

If you want to regenerate the `ReferenceHumanoid.cs` for a different avatar:

1. Clone this repository.
2. In the Project window, select your Humanoid avatar prefab.
3. Right‑click and choose **Assets > VRM > Util > Export Bone Pose Script**.
4. A new `ReferenceHumanoid.cs` will be saved to your desktop.
5. Copy its contents into this project’s `ReferenceHumanoid.cs` to update the default skeleton.

---

*Generated by AnimationClipToVrmaSample*

give me README.md in english
